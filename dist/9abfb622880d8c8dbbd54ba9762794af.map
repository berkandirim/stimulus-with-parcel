{"version":3,"sources":["node_modules/@stimulus/core/dist/module/src/action.js","node_modules/@stimulus/core/dist/module/src/action_descriptor.js","node_modules/@stimulus/core/dist/module/src/action_set.js","node_modules/@stimulus/multimap/dist/module/src/set_operations.js","node_modules/@stimulus/multimap/dist/module/src/multimap.js","node_modules/@stimulus/multimap/dist/module/src/indexed_multimap.js","node_modules/@stimulus/multimap/dist/module/index.js","node_modules/@stimulus/mutation-observers/dist/module/src/element_observer.js","node_modules/@stimulus/mutation-observers/dist/module/src/attribute_observer.js","node_modules/@stimulus/mutation-observers/dist/module/src/token_list_observer.js","node_modules/@stimulus/mutation-observers/dist/module/index.js","node_modules/@stimulus/core/dist/module/src/inline_action_observer.js","node_modules/@stimulus/core/dist/module/src/data_map.js","node_modules/@stimulus/core/dist/module/src/selectors.js","node_modules/@stimulus/core/dist/module/src/target_set.js","node_modules/@stimulus/core/dist/module/src/scope.js","node_modules/@stimulus/core/dist/module/src/context.js","node_modules/@stimulus/core/dist/module/src/definition.js","node_modules/@stimulus/core/dist/module/src/module.js","node_modules/@stimulus/core/dist/module/src/router.js","node_modules/@stimulus/core/dist/module/src/schema.js","node_modules/@stimulus/core/dist/module/src/application.js","node_modules/@stimulus/core/dist/module/src/target_properties.js","node_modules/@stimulus/core/dist/module/src/controller.js","node_modules/@stimulus/core/dist/module/index.js","node_modules/stimulus/index.js","src/controllers/hello_controller.js","src/controllers/refreshable_controller.js","src/index.js","../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/bundle-url.js","../../.config/yarn/global/node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["Action","context","descriptor","eventTarget","prototype","connect","addEventListener","eventName","disconnect","removeEventListener","hasSameDescriptorAs","action","isEqualTo","handleEvent","event","willBeInvokedByEvent","invokeWithEvent","Object","defineProperty","get","enumerable","configurable","method","controller","methodName","Error","call","error","handleError","target","element","Element","contains","scope","containsElement","pattern","ActionDescriptor","identifier","forOptions","options","forElementWithInlineDescriptorString","descriptorString","parseOptionsFromInlineActionDescriptorString","getDefaultEventNameForElement","message","source","trim","matches","match","parseEventTarget","defaultEventNames","tagName","toLowerCase","stringifyEventTarget","toString","eventNameSuffix","eventTargetName","e","getAttribute","window","document","ActionSet","started","actions","Set","start","connectActions","stop","disconnectActions","add","has","delete","forEach","del","fetch","prune","map","key","value","values","set","size","Multimap","valuesByKey","Map","sets","Array","from","reduce","concat","hasKey","hasValue","some","getValuesForKey","getKeysForValue","filter","_a","__extends","extendStatics","setPrototypeOf","__proto__","d","b","p","hasOwnProperty","__","constructor","create","IndexedMultimap","_super","_this","keysByValue","keys","ElementObserver","delegate","elements","mutationObserver","MutationObserver","mutations","processMutations","observe","attributes","childList","subtree","refresh","takeRecords","matchElementsInTree","_i","length","removeElement","_b","_c","addElement","mutations_1","mutation","processMutation","type","processAttributeChange","attributeName","processRemovedNodes","removedNodes","processAddedNodes","addedNodes","node","elementAttributeChanged","matchElement","nodes","processNode","tree","processor","elementFromNode","nodeType","Node","ELEMENT_NODE","elementMatched","elementUnmatched","AttributeObserver","elementObserver","hasAttribute","querySelectorAll","selector","elementMatchedAttribute","elementUnmatchedAttribute","elementAttributeValueChanged","TokenListObserver","tokensByElement","getElementsMatchingToken","token","newTokens","readTokenSetForElement","newTokens_1","elementMatchedToken","tokens","getTokensForElement","tokens_1","elementUnmatchedToken","newTokenSet","elementMatchedTokenForAttribute","elementUnmatchedTokenForAttribute","split","InlineActionObserver","tokenListObserver","connectedActions","schema","actionAttribute","buildActionForElementWithDescriptorString","inlineActionConnected","getConnectedActionForElementWithDescriptorString","inlineActionDisconnected","newAction","find","DataMap","getFormattedKey","setAttribute","removeAttribute","dasherize","replace","_","char","attributeValueContainsToken","TargetSet","targetName","targetNames","arguments","getSelectorForTargetNames","findElement","findAll","findAllElements","getSelectorForTargetName","join","targetDescriptor","targetAttribute","Scope","targets","data","head","tail","filterElements","closest","controllerSelector","controllerAttribute","Context","module","inlineActionObserver","controllerConstructor","initialize","application","parentElement","detail","assign","blessDefinition","definition","blessControllerConstructor","extend","bless","extendWithReflect","Controller","_newTarget","Reflect","construct","testReflectExtension","a","apply","Module","contextsByElement","WeakMap","connectedContexts","connectElement","fetchContextForElement","disconnectElement","getContextForElement","Router","modulesByIdentifier","loadDefinition","unloadIdentifier","connectModule","disconnectModule","connectModuleForIdentifierToElement","disconnectModuleForIdentifierFromElement","modules","contexts","getContextForElementAndIdentifier","elements_1","contexts_1","defaultSchema","Application","documentElement","router","register","load","rest","definitions","isArray","unload","identifiers","getControllerForElementAndIdentifier","console","defineTargetProperties","getTargetNamesForConstructor","name","defineLinkedProperties","capitalize","ancestors","getAncestorsForConstructor","getOwnTargetNamesForConstructor","push","getPrototypeOf","object","properties","charAt","toUpperCase","slice","headlineTarget","innerHTML","contentTarget","bundleURL","getBundleURLCached","getBundleURL","err","stack","getBaseURL","url","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","i"],"mappings":"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","file":"9abfb622880d8c8dbbd54ba9762794af.map","sourcesContent":["var Action = /** @class */ (function () {\n    function Action(context, descriptor, eventTarget) {\n        this.context = context;\n        this.descriptor = descriptor;\n        this.eventTarget = eventTarget;\n    }\n    Action.prototype.connect = function () {\n        this.eventTarget.addEventListener(this.eventName, this, false);\n    };\n    Action.prototype.disconnect = function () {\n        this.eventTarget.removeEventListener(this.eventName, this, false);\n    };\n    Action.prototype.hasSameDescriptorAs = function (action) {\n        return action != null && action.descriptor.isEqualTo(this.descriptor);\n    };\n    Action.prototype.handleEvent = function (event) {\n        if (this.willBeInvokedByEvent(event)) {\n            this.invokeWithEvent(event);\n        }\n    };\n    Object.defineProperty(Action.prototype, \"eventName\", {\n        get: function () {\n            return this.descriptor.eventName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Action.prototype, \"method\", {\n        get: function () {\n            var method = this.controller[this.methodName];\n            if (typeof method == \"function\") {\n                return method;\n            }\n            throw new Error(\"Action \\\"\" + this.descriptor + \"\\\" references undefined method \\\"\" + this.methodName + \"\\\"\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Action.prototype.invokeWithEvent = function (event) {\n        try {\n            this.method.call(this.controller, event);\n        }\n        catch (error) {\n            this.context.handleError(error, \"invoking action \\\"\" + this.descriptor + \"\\\"\", { event: event });\n        }\n    };\n    Action.prototype.willBeInvokedByEvent = function (event) {\n        var eventTarget = event.target;\n        if (this.element === eventTarget) {\n            return true;\n        }\n        else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n            return this.scope.containsElement(eventTarget);\n        }\n        else {\n            return true;\n        }\n    };\n    Object.defineProperty(Action.prototype, \"controller\", {\n        get: function () {\n            return this.context.controller;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Action.prototype, \"methodName\", {\n        get: function () {\n            return this.descriptor.methodName;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Action.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Action.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Action;\n}());\nexport { Action };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvQHN0aW11bHVzL2NvcmUvc3JjL2FjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLQTtJQUtFLGdCQUFZLE9BQWdCLEVBQUUsVUFBNEIsRUFBRSxXQUF3QjtRQUNsRixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQTtRQUN0QixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQTtRQUM1QixJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQTtJQUNoQyxDQUFDO0lBRUQsd0JBQU8sR0FBUDtRQUNFLElBQUksQ0FBQyxXQUFXLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDaEUsQ0FBQztJQUVELDJCQUFVLEdBQVY7UUFDRSxJQUFJLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ25FLENBQUM7SUFFRCxvQ0FBbUIsR0FBbkIsVUFBb0IsTUFBcUI7UUFDdkMsTUFBTSxDQUFDLE1BQU0sSUFBSSxJQUFJLElBQUksTUFBTSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFBO0lBQ3ZFLENBQUM7SUFFRCw0QkFBVyxHQUFYLFVBQVksS0FBWTtRQUN0QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDN0IsQ0FBQztJQUNILENBQUM7SUFFRCxzQkFBSSw2QkFBUzthQUFiO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFBO1FBQ2xDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMEJBQU07YUFBVjtZQUNFLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1lBQy9DLEVBQUUsQ0FBQyxDQUFDLE9BQU8sTUFBTSxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQ2hDLE1BQU0sQ0FBQyxNQUFNLENBQUE7WUFDZixDQUFDO1lBQ0QsTUFBTSxJQUFJLEtBQUssQ0FBQyxjQUFXLElBQUksQ0FBQyxVQUFVLHlDQUFrQyxJQUFJLENBQUMsVUFBVSxPQUFHLENBQUMsQ0FBQTtRQUNqRyxDQUFDOzs7T0FBQTtJQUVPLGdDQUFlLEdBQXZCLFVBQXdCLEtBQVk7UUFDbEMsSUFBSSxDQUFDO1lBQ0gsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUMxQyxDQUFDO1FBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNmLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSx1QkFBb0IsSUFBSSxDQUFDLFVBQVUsT0FBRyxFQUFFLEVBQUUsS0FBSyxPQUFBLEVBQUUsQ0FBQyxDQUFBO1FBQ3BGLENBQUM7SUFDSCxDQUFDO0lBRU8scUNBQW9CLEdBQTVCLFVBQTZCLEtBQVk7UUFDdkMsSUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQTtRQUNoQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDakMsTUFBTSxDQUFDLElBQUksQ0FBQTtRQUNiLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsV0FBVyxZQUFZLE9BQU8sSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEYsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQ2hELENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLE1BQU0sQ0FBQyxJQUFJLENBQUE7UUFDYixDQUFDO0lBQ0gsQ0FBQztJQUVELHNCQUFZLDhCQUFVO2FBQXRCO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFBO1FBQ2hDLENBQUM7OztPQUFBO0lBRUQsc0JBQVksOEJBQVU7YUFBdEI7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUE7UUFDbkMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBWSwyQkFBTzthQUFuQjtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFZLHlCQUFLO2FBQWpCO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBQ0gsYUFBQztBQUFELENBQUMsQUEzRUQsSUEyRUMifQ==","// capture nos.:  12   23 4               43   1 5   5 6  6\nvar pattern = /^((.+?)(@(window|document))?->)?(.+?)#(.+)$/;\nvar ActionDescriptor = /** @class */ (function () {\n    function ActionDescriptor(identifier, eventName, methodName, eventTarget) {\n        this.identifier = identifier;\n        this.eventName = eventName;\n        this.methodName = methodName;\n        this.eventTarget = eventTarget;\n    }\n    ActionDescriptor.forOptions = function (options) {\n        return new ActionDescriptor(options.identifier || error(\"Missing identifier in action descriptor\"), options.eventName || error(\"Missing event name in action descriptor\"), options.methodName || error(\"Missing method name in action descriptor\"), options.eventTarget || error(\"Missing event target in action descriptor\"));\n    };\n    ActionDescriptor.forElementWithInlineDescriptorString = function (element, descriptorString) {\n        try {\n            var options = this.parseOptionsFromInlineActionDescriptorString(descriptorString);\n            options.eventName = options.eventName || this.getDefaultEventNameForElement(element);\n            options.eventTarget = options.eventTarget || element;\n            return ActionDescriptor.forOptions(options);\n        }\n        catch (error) {\n            throw new Error(\"Bad action descriptor \\\"\" + descriptorString + \"\\\": \" + error.message);\n        }\n    };\n    ActionDescriptor.parseOptionsFromInlineActionDescriptorString = function (descriptorString) {\n        var source = descriptorString.trim();\n        var matches = source.match(pattern) || error(\"Invalid action descriptor syntax\");\n        return {\n            identifier: matches[5],\n            eventName: matches[2],\n            methodName: matches[6],\n            eventTarget: parseEventTarget(matches[4])\n        };\n    };\n    ActionDescriptor.getDefaultEventNameForElement = function (element) {\n        return this.defaultEventNames[element.tagName.toLowerCase()](element);\n    };\n    Object.defineProperty(ActionDescriptor.prototype, \"eventTargetName\", {\n        get: function () {\n            return stringifyEventTarget(this.eventTarget);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActionDescriptor.prototype.isEqualTo = function (descriptor) {\n        return descriptor != null &&\n            descriptor.identifier == this.identifier &&\n            descriptor.eventName == this.eventName &&\n            descriptor.methodName == this.methodName &&\n            descriptor.eventTarget == this.eventTarget;\n    };\n    ActionDescriptor.prototype.toString = function () {\n        var eventNameSuffix = this.eventTargetName ? \"@\" + this.eventTargetName : \"\";\n        return \"\" + this.eventName + eventNameSuffix + \"->\" + this.identifier + \"#\" + this.methodName;\n    };\n    ActionDescriptor.defaultEventNames = {\n        \"a\": function (e) { return \"click\"; },\n        \"button\": function (e) { return \"click\"; },\n        \"form\": function (e) { return \"submit\"; },\n        \"input\": function (e) { return e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"change\"; },\n        \"select\": function (e) { return \"change\"; },\n        \"textarea\": function (e) { return \"change\"; }\n    };\n    return ActionDescriptor;\n}());\nexport { ActionDescriptor };\nfunction error(message) {\n    throw new Error(message);\n}\nfunction parseEventTarget(eventTargetName) {\n    if (eventTargetName == \"window\") {\n        return window;\n    }\n    else if (eventTargetName == \"document\") {\n        return document;\n    }\n}\nfunction stringifyEventTarget(eventTarget) {\n    if (eventTarget == window) {\n        return \"window\";\n    }\n    else if (eventTarget == document) {\n        return \"document\";\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uX2Rlc2NyaXB0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvY29yZS9zcmMvYWN0aW9uX2Rlc2NyaXB0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT0EsMkRBQTJEO0FBQzNELElBQU0sT0FBTyxHQUFHLDZDQUE2QyxDQUFBO0FBRTdEO0lBa0RFLDBCQUFZLFVBQWtCLEVBQUUsU0FBaUIsRUFBRSxVQUFrQixFQUFFLFdBQXdCO1FBQzdGLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFBO1FBQzVCLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFBO1FBQzFCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFBO1FBQzVCLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO0lBQ2hDLENBQUM7SUF4Q00sMkJBQVUsR0FBakIsVUFBa0IsT0FBZ0M7UUFDaEQsTUFBTSxDQUFDLElBQUksZ0JBQWdCLENBQ3pCLE9BQU8sQ0FBQyxVQUFVLElBQUssS0FBSyxDQUFDLHlDQUF5QyxDQUFDLEVBQ3ZFLE9BQU8sQ0FBQyxTQUFTLElBQU0sS0FBSyxDQUFDLHlDQUF5QyxDQUFDLEVBQ3ZFLE9BQU8sQ0FBQyxVQUFVLElBQUssS0FBSyxDQUFDLDBDQUEwQyxDQUFDLEVBQ3hFLE9BQU8sQ0FBQyxXQUFXLElBQUksS0FBSyxDQUFDLDJDQUEyQyxDQUFDLENBQzFFLENBQUE7SUFDSCxDQUFDO0lBRU0scURBQW9DLEdBQTNDLFVBQTRDLE9BQWdCLEVBQUUsZ0JBQXdCO1FBQ3BGLElBQUksQ0FBQztZQUNILElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyw0Q0FBNEMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO1lBQ25GLE9BQU8sQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsNkJBQTZCLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDcEYsT0FBTyxD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","var ActionSet = /** @class */ (function () {\n    function ActionSet(context) {\n        this.context = context;\n        this.started = false;\n        this.actions = new Set;\n    }\n    ActionSet.prototype.start = function () {\n        if (!this.started) {\n            this.started = true;\n            this.connectActions();\n        }\n    };\n    ActionSet.prototype.stop = function () {\n        if (this.started) {\n            this.disconnectActions();\n            this.started = false;\n        }\n    };\n    ActionSet.prototype.add = function (action) {\n        if (!this.actions.has(action)) {\n            action.connect();\n            this.actions.add(action);\n        }\n    };\n    ActionSet.prototype.delete = function (action) {\n        if (this.actions.has(action)) {\n            this.actions.delete(action);\n            action.disconnect();\n        }\n    };\n    ActionSet.prototype.connectActions = function () {\n        this.actions.forEach(function (action) { return action.connect(); });\n    };\n    ActionSet.prototype.disconnectActions = function () {\n        this.actions.forEach(function (action) { return action.disconnect(); });\n    };\n    return ActionSet;\n}());\nexport { ActionSet };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aW9uX3NldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9jb3JlL3NyYy9hY3Rpb25fc2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBO0lBS0UsbUJBQVksT0FBZ0I7UUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7UUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUE7UUFDcEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUN4QixDQUFDO0lBRUQseUJBQUssR0FBTDtRQUNFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDbEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUE7WUFDbkIsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFBO1FBQ3ZCLENBQUM7SUFDSCxDQUFDO0lBRUQsd0JBQUksR0FBSjtRQUNFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFBO1lBQ3hCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFBO1FBQ3RCLENBQUM7SUFDSCxDQUFDO0lBRUQsdUJBQUcsR0FBSCxVQUFJLE1BQWM7UUFDaEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUIsTUFBTSxDQUFDLE9BQU8sRUFBRSxDQUFBO1lBQ2hCLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO1FBQzFCLENBQUM7SUFDSCxDQUFDO0lBRUQsMEJBQU0sR0FBTixVQUFPLE1BQWM7UUFDbkIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdCLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFBO1lBQzNCLE1BQU0sQ0FBQyxVQUFVLEVBQUUsQ0FBQTtRQUNyQixDQUFDO0lBQ0gsQ0FBQztJQUVPLGtDQUFjLEdBQXRCO1FBQ0UsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsT0FBTyxFQUFFLEVBQWhCLENBQWdCLENBQUMsQ0FBQTtJQUNsRCxDQUFDO0lBRU8scUNBQWlCLEdBQXpCO1FBQ0UsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsVUFBQSxNQUFNLElBQUksT0FBQSxNQUFNLENBQUMsVUFBVSxFQUFFLEVBQW5CLENBQW1CLENBQUMsQ0FBQTtJQUNyRCxDQUFDO0lBQ0gsZ0JBQUM7QUFBRCxDQUFDLEFBOUNELElBOENDIn0=","export function add(map, key, value) {\n    fetch(map, key).add(value);\n}\nexport function del(map, key, value) {\n    fetch(map, key).delete(value);\n    prune(map, key);\n}\nexport function fetch(map, key) {\n    var values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nexport function prune(map, key) {\n    var values = map.get(key);\n    if (values != null && values.size == 0) {\n        map.delete(key);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0X29wZXJhdGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvbXVsdGltYXAvc3JjL3NldF9vcGVyYXRpb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sY0FBb0IsR0FBbUIsRUFBRSxHQUFNLEVBQUUsS0FBUTtJQUM3RCxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUM1QixDQUFDO0FBRUQsTUFBTSxjQUFvQixHQUFtQixFQUFFLEdBQU0sRUFBRSxLQUFRO0lBQzdELEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQzdCLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUE7QUFDakIsQ0FBQztBQUVELE1BQU0sZ0JBQXNCLEdBQW1CLEVBQUUsR0FBTTtJQUNyRCxJQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3pCLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNaLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFBO1FBQ2xCLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFBO0lBQ3RCLENBQUM7SUFDRCxNQUFNLENBQUMsTUFBTSxDQUFBO0FBQ2YsQ0FBQztBQUVELE1BQU0sZ0JBQXNCLEdBQW1CLEVBQUUsR0FBTTtJQUNyRCxJQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQzNCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sSUFBSSxJQUFJLElBQUksTUFBTSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUE7SUFDakIsQ0FBQztBQUNILENBQUMifQ==","import { add, del } from \"./set_operations\";\nvar Multimap = /** @class */ (function () {\n    function Multimap() {\n        this.valuesByKey = new Map();\n    }\n    Object.defineProperty(Multimap.prototype, \"values\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (values, set) { return values.concat(Array.from(set)); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Multimap.prototype, \"size\", {\n        get: function () {\n            var sets = Array.from(this.valuesByKey.values());\n            return sets.reduce(function (size, set) { return size + set.size; }, 0);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Multimap.prototype.add = function (key, value) {\n        add(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.delete = function (key, value) {\n        del(this.valuesByKey, key, value);\n    };\n    Multimap.prototype.has = function (key, value) {\n        var values = this.valuesByKey.get(key);\n        return values != null && values.has(value);\n    };\n    Multimap.prototype.hasKey = function (key) {\n        return this.valuesByKey.has(key);\n    };\n    Multimap.prototype.hasValue = function (value) {\n        var sets = Array.from(this.valuesByKey.values());\n        return sets.some(function (set) { return set.has(value); });\n    };\n    Multimap.prototype.getValuesForKey = function (key) {\n        var values = this.valuesByKey.get(key);\n        return values ? Array.from(values) : [];\n    };\n    Multimap.prototype.getKeysForValue = function (value) {\n        return Array.from(this.valuesByKey)\n            .filter(function (_a) {\n            var key = _a[0], values = _a[1];\n            return values.has(value);\n        })\n            .map(function (_a) {\n            var key = _a[0], values = _a[1];\n            return key;\n        });\n    };\n    return Multimap;\n}());\nexport { Multimap };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGltYXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvbXVsdGltYXAvc3JjL211bHRpbWFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sa0JBQWtCLENBQUE7QUFFM0M7SUFHRTtRQUNFLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxHQUFHLEVBQWEsQ0FBQTtJQUN6QyxDQUFDO0lBRUQsc0JBQUksNEJBQU07YUFBVjtZQUNFLElBQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1lBQ2xELE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQUMsTUFBTSxFQUFFLEdBQUcsSUFBSyxPQUFBLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUE5QixDQUE4QixFQUFRLEVBQUUsQ0FBQyxDQUFBO1FBQy9FLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMEJBQUk7YUFBUjtZQUNFLElBQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFBO1lBQ2xELE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQUMsSUFBSSxFQUFFLEdBQUcsSUFBSyxPQUFBLElBQUksR0FBRyxHQUFHLENBQUMsSUFBSSxFQUFmLENBQWUsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUN2RCxDQUFDOzs7T0FBQTtJQUVELHNCQUFHLEdBQUgsVUFBSSxHQUFNLEVBQUUsS0FBUTtRQUNsQixHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVELHlCQUFNLEdBQU4sVUFBTyxHQUFNLEVBQUUsS0FBUTtRQUNyQixHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVELHNCQUFHLEdBQUgsVUFBSSxHQUFNLEVBQUUsS0FBUTtRQUNsQixJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUN4QyxNQUFNLENBQUMsTUFBTSxJQUFJLElBQUksSUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQzVDLENBQUM7SUFFRCx5QkFBTSxHQUFOLFVBQU8sR0FBTTtRQUNYLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUNsQyxDQUFDO0lBRUQsMkJBQVEsR0FBUixVQUFTLEtBQVE7UUFDZixJQUFNLElBQUksR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQTtRQUNsRCxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFBLEdBQUcsSUFBSSxPQUFBLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQWQsQ0FBYyxDQUFDLENBQUE7SUFDekMsQ0FBQztJQUVELGtDQUFlLEdBQWYsVUFBZ0IsR0FBTTtRQUNwQixJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUN4QyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7SUFDekMsQ0FBQztJQUVELGtDQUFlLEdBQWYsVUFBZ0IsS0FBUTtRQUN0QixNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO2FBQ2hDLE1BQU0sQ0FBQyxVQUFDLEVBQWE7Z0JBQVosV0FBRyxFQUFFLGNBQU07WUFBTSxPQUFBLE1BQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDO1FBQWpCLENBQWlCLENBQUM7YUFDNUMsR0FBRyxDQUFDLFVBQUMsRUFBYTtnQkFBWixXQUFHLEVBQUUsY0FBTTtZQUFNLE9BQUEsR0FBRztRQUFILENBQUcsQ0FBQyxDQUFBO0lBQ2hDLENBQUM7SUFDSCxlQUFDO0FBQUQsQ0FBQyxBQWpERCxJQWlEQyJ9","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Multimap } from \"./multimap\";\nimport { add, del } from \"./set_operations\";\nvar IndexedMultimap = /** @class */ (function (_super) {\n    __extends(IndexedMultimap, _super);\n    function IndexedMultimap() {\n        var _this = _super.call(this) || this;\n        _this.keysByValue = new Map;\n        return _this;\n    }\n    Object.defineProperty(IndexedMultimap.prototype, \"values\", {\n        get: function () {\n            return Array.from(this.keysByValue.keys());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    IndexedMultimap.prototype.add = function (key, value) {\n        _super.prototype.add.call(this, key, value);\n        add(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.delete = function (key, value) {\n        _super.prototype.delete.call(this, key, value);\n        del(this.keysByValue, value, key);\n    };\n    IndexedMultimap.prototype.hasValue = function (value) {\n        return this.keysByValue.has(value);\n    };\n    IndexedMultimap.prototype.getKeysForValue = function (value) {\n        var set = this.keysByValue.get(value);\n        return set ? Array.from(set) : [];\n    };\n    return IndexedMultimap;\n}(Multimap));\nexport { IndexedMultimap };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXhlZF9tdWx0aW1hcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9tdWx0aW1hcC9zcmMvaW5kZXhlZF9tdWx0aW1hcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLFlBQVksQ0FBQTtBQUNyQyxPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLGtCQUFrQixDQUFBO0FBRTNDO0lBQTJDLG1DQUFjO0lBR3ZEO1FBQUEsWUFDRSxpQkFBTyxTQUVSO1FBREMsS0FBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLEdBQUcsQ0FBQTs7SUFDNUIsQ0FBQztJQUVELHNCQUFJLG1DQUFNO2FBQVY7WUFDRSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUE7UUFDNUMsQ0FBQzs7O09BQUE7SUFFRCw2QkFBRyxHQUFILFVBQUksR0FBTSxFQUFFLEtBQVE7UUFDbEIsaUJBQU0sR0FBRyxZQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQTtRQUNyQixHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDbkMsQ0FBQztJQUVELGdDQUFNLEdBQU4sVUFBTyxHQUFNLEVBQUUsS0FBUTtRQUNyQixpQkFBTSxNQUFNLFlBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3hCLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUNuQyxDQUFDO0lBRUQsa0NBQVEsR0FBUixVQUFTLEtBQVE7UUFDZixNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7SUFDcEMsQ0FBQztJQUVELHlDQUFlLEdBQWYsVUFBZ0IsS0FBUTtRQUN0QixJQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtRQUN2QyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7SUFDbkMsQ0FBQztJQUNILHNCQUFDO0FBQUQsQ0FBQyxBQTlCRCxDQUEyQyxRQUFRLEdBOEJsRCJ9","export * from \"./src/multimap\";\nexport * from \"./src/indexed_multimap\";\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvbXVsdGltYXAvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsY0FBYyxnQkFBZ0IsQ0FBQTtBQUM5QixjQUFjLHdCQUF3QixDQUFBIn0=","var ElementObserver = /** @class */ (function () {\n    function ElementObserver(element, delegate) {\n        var _this = this;\n        this.element = element;\n        this.started = false;\n        this.delegate = delegate;\n        this.elements = new Set;\n        this.mutationObserver = new MutationObserver(function (mutations) { return _this.processMutations(mutations); });\n    }\n    ElementObserver.prototype.start = function () {\n        if (!this.started) {\n            this.mutationObserver.observe(this.element, { attributes: true, childList: true, subtree: true });\n            this.started = true;\n            this.refresh();\n        }\n    };\n    ElementObserver.prototype.stop = function () {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    };\n    ElementObserver.prototype.refresh = function () {\n        if (this.started) {\n            var matches = new Set(this.matchElementsInTree());\n            for (var _i = 0, _a = Array.from(this.elements); _i < _a.length; _i++) {\n                var element = _a[_i];\n                if (!matches.has(element)) {\n                    this.removeElement(element);\n                }\n            }\n            for (var _b = 0, _c = Array.from(matches); _b < _c.length; _b++) {\n                var element = _c[_b];\n                this.addElement(element);\n            }\n        }\n    };\n    // Mutation record processing\n    ElementObserver.prototype.processMutations = function (mutations) {\n        for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {\n            var mutation = mutations_1[_i];\n            this.processMutation(mutation);\n        }\n    };\n    ElementObserver.prototype.processMutation = function (mutation) {\n        if (mutation.type == \"attributes\") {\n            this.processAttributeChange(mutation.target, mutation.attributeName);\n        }\n        else if (mutation.type == \"childList\") {\n            this.processRemovedNodes(mutation.removedNodes);\n            this.processAddedNodes(mutation.addedNodes);\n        }\n    };\n    ElementObserver.prototype.processAttributeChange = function (node, attributeName) {\n        var element = node;\n        if (this.elements.has(element)) {\n            if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n                this.delegate.elementAttributeChanged(element, attributeName);\n            }\n            else {\n                this.removeElement(element);\n            }\n        }\n        else if (this.matchElement(element)) {\n            this.addElement(element);\n        }\n    };\n    ElementObserver.prototype.processRemovedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            this.processNode(node, this.removeElement);\n        }\n    };\n    ElementObserver.prototype.processAddedNodes = function (nodes) {\n        for (var _i = 0, _a = Array.from(nodes); _i < _a.length; _i++) {\n            var node = _a[_i];\n            this.processNode(node, this.addElement);\n        }\n    };\n    // Element matching\n    ElementObserver.prototype.matchElement = function (element) {\n        return this.delegate.matchElement(element);\n    };\n    ElementObserver.prototype.matchElementsInTree = function (tree) {\n        if (tree === void 0) { tree = this.element; }\n        return this.delegate.matchElementsInTree(tree);\n    };\n    ElementObserver.prototype.processNode = function (node, processor) {\n        var tree = this.elementFromNode(node);\n        if (tree) {\n            for (var _i = 0, _a = this.matchElementsInTree(tree); _i < _a.length; _i++) {\n                var element = _a[_i];\n                processor.call(this, element);\n            }\n        }\n    };\n    ElementObserver.prototype.elementFromNode = function (node) {\n        if (node.nodeType == Node.ELEMENT_NODE) {\n            return node;\n        }\n    };\n    // Element tracking\n    ElementObserver.prototype.addElement = function (element) {\n        if (!this.elements.has(element)) {\n            this.elements.add(element);\n            if (this.delegate.elementMatched) {\n                this.delegate.elementMatched(element);\n            }\n        }\n    };\n    ElementObserver.prototype.removeElement = function (element) {\n        if (this.elements.has(element)) {\n            this.elements.delete(element);\n            if (this.delegate.elementUnmatched) {\n                this.delegate.elementUnmatched(element);\n            }\n        }\n    };\n    return ElementObserver;\n}());\nexport { ElementObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWxlbWVudF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9tdXRhdGlvbi1vYnNlcnZlcnMvc3JjL2VsZW1lbnRfb2JzZXJ2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBU0E7SUFRRSx5QkFBWSxPQUFPLEVBQUUsUUFBUTtRQUE3QixpQkFPQztRQU5DLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFBO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFBO1FBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBRXhCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxHQUFHLENBQUE7UUFDdkIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksZ0JBQWdCLENBQUMsVUFBQyxTQUFTLElBQUssT0FBQSxLQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEVBQWhDLENBQWdDLENBQUMsQ0FBQTtJQUMvRixDQUFDO0lBRUQsK0JBQUssR0FBTDtRQUNFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7WUFDbEIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFBO1lBQ2pHLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFBO1lBQ25CLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUNoQixDQUFDO0lBQ0gsQ0FBQztJQUVELDhCQUFJLEdBQUo7UUFDRSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNqQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUE7WUFDbkMs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","import { ElementObserver } from \"./element_observer\";\nvar AttributeObserver = /** @class */ (function () {\n    function AttributeObserver(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n    }\n    Object.defineProperty(AttributeObserver.prototype, \"element\", {\n        get: function () {\n            return this.elementObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(AttributeObserver.prototype, \"selector\", {\n        get: function () {\n            return \"[\" + this.attributeName + \"]\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AttributeObserver.prototype.start = function () {\n        this.elementObserver.start();\n    };\n    AttributeObserver.prototype.stop = function () {\n        this.elementObserver.stop();\n    };\n    // Element observer delegate\n    AttributeObserver.prototype.matchElement = function (element) {\n        return element.hasAttribute(this.attributeName);\n    };\n    AttributeObserver.prototype.matchElementsInTree = function (tree) {\n        var match = this.matchElement(tree) ? [tree] : [];\n        var matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    };\n    AttributeObserver.prototype.elementMatched = function (element) {\n        if (this.delegate.elementMatchedAttribute) {\n            this.delegate.elementMatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementUnmatched = function (element) {\n        if (this.delegate.elementUnmatchedAttribute) {\n            this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n        }\n    };\n    AttributeObserver.prototype.elementAttributeChanged = function (element, attributeName) {\n        if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n            this.delegate.elementAttributeValueChanged(element, attributeName);\n        }\n    };\n    return AttributeObserver;\n}());\nexport { AttributeObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXR0cmlidXRlX29ic2VydmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvQHN0aW11bHVzL211dGF0aW9uLW9ic2VydmVycy9zcmMvYXR0cmlidXRlX29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxlQUFlLEVBQTJCLE1BQU0sb0JBQW9CLENBQUE7QUFRN0U7SUFNRSwyQkFBWSxPQUFnQixFQUFFLGFBQXFCLEVBQUUsUUFBbUM7UUFDdEYsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUE7UUFDbEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7UUFFeEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLGVBQWUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7SUFDM0QsQ0FBQztJQUVELHNCQUFJLHNDQUFPO2FBQVg7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUE7UUFDckMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSx1Q0FBUTthQUFaO1lBQ0UsTUFBTSxDQUFDLE1BQUksSUFBSSxDQUFDLGFBQWEsTUFBRyxDQUFBO1FBQ2xDLENBQUM7OztPQUFBO0lBRUQsaUNBQUssR0FBTDtRQUNFLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxFQUFFLENBQUE7SUFDOUIsQ0FBQztJQUVELGdDQUFJLEdBQUo7UUFDRSxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxDQUFBO0lBQzdCLENBQUM7SUFFRCw0QkFBNEI7SUFFNUIsd0NBQVksR0FBWixVQUFhLE9BQWdCO1FBQzNCLE1BQU0sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQTtJQUNqRCxDQUFDO0lBRUQsK0NBQW1CLEdBQW5CLFVBQW9CLElBQWE7UUFDL0IsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO1FBQ25ELElBQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFBO1FBQ2hFLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQzlCLENBQUM7SUFFRCwwQ0FBYyxHQUFkLFVBQWUsT0FBZ0I7UUFDN0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUM7WUFDMUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFBO1FBQ3BFLENBQUM7SUFDSCxDQUFDO0lBRUQsNENBQWdCLEdBQWhCLFVBQWlCLE9BQWdCO1FBQy9CLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDO1lBQzVDLElBQUksQ0FBQyxRQUFRLENBQUMseUJBQXlCLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQTtRQUN0RSxDQUFDO0lBQ0gsQ0FBQztJQUVELG1EQUF1QixHQUF2QixVQUF3QixPQUFnQixFQUFFLGFBQXFCO1FBQzdELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsNEJBQTRCLElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBQ3RGLElBQUksQ0FBQyxRQUFRLENBQUMsNEJBQTRCLENBQUMsT0FBTyxFQUFFLGFBQWEsQ0FBQyxDQUFBO1FBQ3BFLENBQUM7SUFDSCxDQUFDO0lBQ0gsd0JBQUM7QUFBRCxDQUFDLEFBMURELElBMERDIn0=","import { ElementObserver } from \"./element_observer\";\nimport { IndexedMultimap } from \"@stimulus/multimap\";\nvar TokenListObserver = /** @class */ (function () {\n    function TokenListObserver(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n        this.tokensByElement = new IndexedMultimap;\n    }\n    Object.defineProperty(TokenListObserver.prototype, \"started\", {\n        get: function () {\n            return this.elementObserver.started;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TokenListObserver.prototype.start = function () {\n        this.elementObserver.start();\n    };\n    TokenListObserver.prototype.stop = function () {\n        this.elementObserver.stop();\n    };\n    TokenListObserver.prototype.refresh = function () {\n        this.elementObserver.refresh();\n    };\n    Object.defineProperty(TokenListObserver.prototype, \"element\", {\n        get: function () {\n            return this.elementObserver.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TokenListObserver.prototype, \"selector\", {\n        get: function () {\n            return \"[\" + this.attributeName + \"]\";\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TokenListObserver.prototype.getElementsMatchingToken = function (token) {\n        return this.tokensByElement.getKeysForValue(token);\n    };\n    // Element observer delegate\n    TokenListObserver.prototype.matchElement = function (element) {\n        return element.hasAttribute(this.attributeName);\n    };\n    TokenListObserver.prototype.matchElementsInTree = function (tree) {\n        var match = this.matchElement(tree) ? [tree] : [];\n        var matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    };\n    TokenListObserver.prototype.elementMatched = function (element) {\n        var newTokens = Array.from(this.readTokenSetForElement(element));\n        for (var _i = 0, newTokens_1 = newTokens; _i < newTokens_1.length; _i++) {\n            var token = newTokens_1[_i];\n            this.elementMatchedToken(element, token);\n        }\n    };\n    TokenListObserver.prototype.elementUnmatched = function (element) {\n        var tokens = this.getTokensForElement(element);\n        for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n            var token = tokens_1[_i];\n            this.elementUnmatchedToken(element, token);\n        }\n    };\n    TokenListObserver.prototype.elementAttributeChanged = function (element) {\n        var newTokenSet = this.readTokenSetForElement(element);\n        for (var _i = 0, _a = Array.from(newTokenSet); _i < _a.length; _i++) {\n            var token = _a[_i];\n            this.elementMatchedToken(element, token);\n        }\n        for (var _b = 0, _c = this.getTokensForElement(element); _b < _c.length; _b++) {\n            var token = _c[_b];\n            if (!newTokenSet.has(token)) {\n                this.elementUnmatchedToken(element, token);\n            }\n        }\n    };\n    // Private\n    TokenListObserver.prototype.elementMatchedToken = function (element, token) {\n        if (!this.tokensByElement.has(element, token)) {\n            this.tokensByElement.add(element, token);\n            if (this.delegate.elementMatchedTokenForAttribute) {\n                this.delegate.elementMatchedTokenForAttribute(element, token, this.attributeName);\n            }\n        }\n    };\n    TokenListObserver.prototype.elementUnmatchedToken = function (element, token) {\n        if (this.tokensByElement.has(element, token)) {\n            this.tokensByElement.delete(element, token);\n            if (this.delegate.elementUnmatchedTokenForAttribute) {\n                this.delegate.elementUnmatchedTokenForAttribute(element, token, this.attributeName);\n            }\n        }\n    };\n    TokenListObserver.prototype.getTokensForElement = function (element) {\n        return this.tokensByElement.getValuesForKey(element);\n    };\n    TokenListObserver.prototype.readTokenSetForElement = function (element) {\n        var tokens = new Set;\n        var value = element.getAttribute(this.attributeName) || \"\";\n        for (var _i = 0, _a = value.split(/\\s+/); _i < _a.length; _i++) {\n            var token = _a[_i];\n            if (token.length) {\n                tokens.add(token);\n            }\n        }\n        return tokens;\n    };\n    return TokenListObserver;\n}());\nexport { TokenListObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5fbGlzdF9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9tdXRhdGlvbi1vYnNlcnZlcnMvc3JjL3Rva2VuX2xpc3Rfb2JzZXJ2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGVBQWUsRUFBMkIsTUFBTSxvQkFBb0IsQ0FBQTtBQUM3RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sb0JBQW9CLENBQUE7QUFPcEQ7SUFPRSwyQkFBWSxPQUFnQixFQUFFLGFBQXFCLEVBQUUsUUFBbUM7UUFDdEYsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUE7UUFDbEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7UUFFeEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLGVBQWUsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDekQsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLGVBQWUsQ0FBQTtJQUM1QyxDQUFDO0lBRUQsc0JBQUksc0NBQU87YUFBWDtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQTtRQUNyQyxDQUFDOzs7T0FBQTtJQUVELGlDQUFLLEdBQUw7UUFDRSxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFBO0lBQzlCLENBQUM7SUFFRCxnQ0FBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUM3QixDQUFDO0lBRUQsbUNBQU8sR0FBUDtRQUNFLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxFQUFFLENBQUE7SUFDaEMsQ0FBQztJQUVELHNCQUFJLHNDQUFPO2FBQVg7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUE7UUFDckMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSx1Q0FBUTthQUFaO1lBQ0UsTUFB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","export * from \"./src/attribute_observer\";\nexport * from \"./src/element_observer\";\nexport * from \"./src/token_list_observer\";\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvbXV0YXRpb24tb2JzZXJ2ZXJzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGNBQWMsMEJBQTBCLENBQUE7QUFDeEMsY0FBYyx3QkFBd0IsQ0FBQTtBQUN0QyxjQUFjLDJCQUEyQixDQUFBIn0=","import { Action } from \"./action\";\nimport { ActionDescriptor } from \"./action_descriptor\";\nimport { Multimap } from \"@stimulus/multimap\";\nimport { TokenListObserver } from \"@stimulus/mutation-observers\";\nvar InlineActionObserver = /** @class */ (function () {\n    function InlineActionObserver(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.tokenListObserver = new TokenListObserver(this.element, this.attributeName, this);\n        this.connectedActions = new Multimap();\n    }\n    Object.defineProperty(InlineActionObserver.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InlineActionObserver.prototype, \"schema\", {\n        get: function () {\n            return this.context.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InlineActionObserver.prototype, \"attributeName\", {\n        get: function () {\n            return this.schema.actionAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InlineActionObserver.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(InlineActionObserver.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    InlineActionObserver.prototype.start = function () {\n        this.tokenListObserver.start();\n    };\n    InlineActionObserver.prototype.stop = function () {\n        this.tokenListObserver.stop();\n    };\n    // Token list observer delegate\n    /** @private */\n    InlineActionObserver.prototype.elementMatchedTokenForAttribute = function (element, token, attributeName) {\n        if (this.scope.containsElement(element)) {\n            var action = this.buildActionForElementWithDescriptorString(element, token);\n            if (action) {\n                this.connectedActions.add(element, action);\n                this.delegate.inlineActionConnected(action);\n            }\n        }\n    };\n    /** @private */\n    InlineActionObserver.prototype.elementUnmatchedTokenForAttribute = function (element, token, attributeName) {\n        var action = this.getConnectedActionForElementWithDescriptorString(element, token);\n        if (action) {\n            this.connectedActions.delete(element, action);\n            this.delegate.inlineActionDisconnected(action);\n        }\n    };\n    InlineActionObserver.prototype.getConnectedActionForElementWithDescriptorString = function (element, descriptorString) {\n        var newAction = this.buildActionForElementWithDescriptorString(element, descriptorString);\n        if (newAction) {\n            var actions = this.connectedActions.getValuesForKey(element);\n            return actions.find(function (action) { return action.hasSameDescriptorAs(newAction); });\n        }\n    };\n    InlineActionObserver.prototype.buildActionForElementWithDescriptorString = function (element, descriptorString) {\n        try {\n            var descriptor = ActionDescriptor.forElementWithInlineDescriptorString(element, descriptorString);\n            if (descriptor.identifier == this.identifier) {\n                return new Action(this.context, descriptor, descriptor.eventTarget);\n            }\n        }\n        catch (error) {\n            this.context.handleError(error, \"parsing descriptor string \\\"\" + descriptorString + \"\\\"\", { element: element });\n        }\n    };\n    return InlineActionObserver;\n}());\nexport { InlineActionObserver };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5saW5lX2FjdGlvbl9vYnNlcnZlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9jb3JlL3NyYy9pbmxpbmVfYWN0aW9uX29ic2VydmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUE7QUFDakMsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUE7QUFFdEQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLG9CQUFvQixDQUFBO0FBRzdDLE9BQU8sRUFBRSxpQkFBaUIsRUFBNkIsTUFBTSw4QkFBOEIsQ0FBQTtBQU8zRjtJQU1FLDhCQUFZLE9BQWdCLEVBQUUsUUFBc0M7UUFDbEUsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7UUFDdEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7UUFDeEIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ3RGLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLFFBQVEsRUFBbUIsQ0FBQTtJQUN6RCxDQUFDO0lBRUQsc0JBQUksdUNBQUs7YUFBVDtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQTtRQUMzQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHdDQUFNO2FBQVY7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUE7UUFDNUIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwrQ0FBYTthQUFqQjtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQTtRQUNwQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHlDQUFPO2FBQVg7WUFDRSxNQUFNLENB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","var DataMap = /** @class */ (function () {\n    function DataMap(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(DataMap.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(DataMap.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DataMap.prototype.get = function (key) {\n        key = this.getFormattedKey(key);\n        return this.element.getAttribute(key);\n    };\n    DataMap.prototype.set = function (key, value) {\n        key = this.getFormattedKey(key);\n        this.element.setAttribute(key, value);\n        return this.get(key);\n    };\n    DataMap.prototype.has = function (key) {\n        key = this.getFormattedKey(key);\n        return this.element.hasAttribute(key);\n    };\n    DataMap.prototype.delete = function (key) {\n        if (this.has(key)) {\n            key = this.getFormattedKey(key);\n            this.element.removeAttribute(key);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    DataMap.prototype.getFormattedKey = function (key) {\n        return \"data-\" + this.identifier + \"-\" + dasherize(key);\n    };\n    return DataMap;\n}());\nexport { DataMap };\nfunction dasherize(value) {\n    return value.toString().replace(/([A-Z])/g, function (_, char) { return \"-\" + char.toLowerCase(); });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YV9tYXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvY29yZS9zcmMvZGF0YV9tYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7SUFHRSxpQkFBWSxLQUFZO1FBQ3RCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO0lBQ3BCLENBQUM7SUFFRCxzQkFBSSw0QkFBTzthQUFYO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksK0JBQVU7YUFBZDtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQTtRQUM5QixDQUFDOzs7T0FBQTtJQUVELHFCQUFHLEdBQUgsVUFBSSxHQUFXO1FBQ2IsR0FBRyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDL0IsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3ZDLENBQUM7SUFFRCxxQkFBRyxHQUFILFVBQUksR0FBVyxFQUFFLEtBQUs7UUFDcEIsR0FBRyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7UUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3JDLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3RCLENBQUM7SUFFRCxxQkFBRyxHQUFILFVBQUksR0FBVztRQUNiLEdBQUcsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxDQUFBO1FBQy9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN2QyxDQUFDO0lBRUQsd0JBQU0sR0FBTixVQUFPLEdBQVc7UUFDaEIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEIsR0FBRyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDakMsTUFBTSxDQUFDLElBQUksQ0FBQTtRQUNiLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLE1BQU0sQ0FBQyxLQUFLLENBQUE7UUFDZCxDQUFDO0lBQ0gsQ0FBQztJQUVPLGlDQUFlLEdBQXZCLFVBQXdCLEdBQUc7UUFDekIsTUFBTSxDQUFDLFVBQVEsSUFBSSxDQUFDLFVBQVUsU0FBSSxTQUFTLENBQUMsR0FBRyxDQUFHLENBQUE7SUFDcEQsQ0FBQztJQUNILGNBQUM7QUFBRCxDQUFDLEFBNUNELElBNENDOztBQUVELG1CQUFtQixLQUFLO0lBQ3RCLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxVQUFDLENBQUMsRUFBRSxJQUFJLElBQUssT0FBQSxNQUFJLElBQUksQ0FBQyxXQUFXLEVBQUksRUFBeEIsQ0FBd0IsQ0FBQyxDQUFBO0FBQ3BGLENBQUMifQ==","/** @private */\nexport function attributeValueContainsToken(attributeName, token) {\n    return \"[\" + attributeName + \"~=\\\"\" + token + \"\\\"]\";\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0b3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvQHN0aW11bHVzL2NvcmUvc3JjL3NlbGVjdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxlQUFlO0FBQ2YsTUFBTSxzQ0FBc0MsYUFBcUIsRUFBRSxLQUFhO0lBQzlFLE1BQU0sQ0FBQyxNQUFJLGFBQWEsWUFBTSxLQUFLLFFBQUksQ0FBQTtBQUN6QyxDQUFDIn0=","import { attributeValueContainsToken } from \"./selectors\";\nvar TargetSet = /** @class */ (function () {\n    function TargetSet(scope) {\n        this.scope = scope;\n    }\n    Object.defineProperty(TargetSet.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(TargetSet.prototype, \"schema\", {\n        get: function () {\n            return this.scope.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    TargetSet.prototype.has = function (targetName) {\n        return this.find(targetName) != null;\n    };\n    TargetSet.prototype.find = function () {\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        var selector = this.getSelectorForTargetNames(targetNames);\n        return this.scope.findElement(selector);\n    };\n    TargetSet.prototype.findAll = function () {\n        var targetNames = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            targetNames[_i] = arguments[_i];\n        }\n        var selector = this.getSelectorForTargetNames(targetNames);\n        return this.scope.findAllElements(selector);\n    };\n    TargetSet.prototype.getSelectorForTargetNames = function (targetNames) {\n        var _this = this;\n        return targetNames.map(function (targetName) { return _this.getSelectorForTargetName(targetName); }).join(\", \");\n    };\n    TargetSet.prototype.getSelectorForTargetName = function (targetName) {\n        var targetDescriptor = this.identifier + \".\" + targetName;\n        return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n    };\n    return TargetSet;\n}());\nexport { TargetSet };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFyZ2V0X3NldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9jb3JlL3NyYy90YXJnZXRfc2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV6RDtJQUdFLG1CQUFZLEtBQVk7UUFDdEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7SUFDcEIsQ0FBQztJQUVELHNCQUFJLDhCQUFPO2FBQVg7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUE7UUFDM0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxpQ0FBVTthQUFkO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFBO1FBQzlCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNkJBQU07YUFBVjtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQTtRQUMxQixDQUFDOzs7T0FBQTtJQUVELHVCQUFHLEdBQUgsVUFBSSxVQUFrQjtRQUNwQixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxJQUFJLENBQUE7SUFDdEMsQ0FBQztJQUVELHdCQUFJLEdBQUo7UUFBSyxxQkFBd0I7YUFBeEIsVUFBd0IsRUFBeEIscUJBQXdCLEVBQXhCLElBQXdCO1lBQXhCLGdDQUF3Qjs7UUFDM0IsSUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLHlCQUF5QixDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzVELE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUN6QyxDQUFDO0lBRUQsMkJBQU8sR0FBUDtRQUFRLHFCQUF3QjthQUF4QixVQUF3QixFQUF4QixxQkFBd0IsRUFBeEIsSUFBd0I7WUFBeEIsZ0NBQXdCOztRQUM5QixJQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMseUJBQXlCLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDNUQsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFBO0lBQzdDLENBQUM7SUFFTyw2Q0FBeUIsR0FBakMsVUFBa0MsV0FBcUI7UUFBdkQsaUJBRUM7UUFEQyxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxVQUFBLFVBQVUsSUFBSSxPQUFBLEtBQUksQ0FBQyx3QkFBd0IsQ0FBQyxVQUFVLENBQUMsRUFBekMsQ0FBeUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUM1RixDQUFDO0lBRU8sNENBQXdCLEdBQWhDLFVBQWlDLFVBQWtCO1FBQ2pELElBQU0sZ0JBQWdCLEdBQU0sSUFBSSxDQUFDLFVBQVUsU0FBSSxVQUFZLENBQUE7UUFDM0QsTUFBTSxDQUFDLDJCQUEyQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsZUFBZSxFQUFFLGdCQUFnQixDQUFDLENBQUE7SUFDbkYsQ0FBQztJQUNILGdCQUFDO0FBQUQsQ0FBQyxBQXpDRCxJQXlDQyJ9","import { DataMap } from \"./data_map\";\nimport { TargetSet } from \"./target_set\";\nimport { attributeValueContainsToken } from \"./selectors\";\nvar Scope = /** @class */ (function () {\n    function Scope(schema, identifier, element) {\n        this.schema = schema;\n        this.identifier = identifier;\n        this.element = element;\n        this.targets = new TargetSet(this);\n        this.data = new DataMap(this);\n    }\n    Scope.prototype.findElement = function (selector) {\n        return this.findAllElements(selector)[0];\n    };\n    Scope.prototype.findAllElements = function (selector) {\n        var head = this.element.matches(selector) ? [this.element] : [];\n        var tail = this.filterElements(Array.from(this.element.querySelectorAll(selector)));\n        return head.concat(tail);\n    };\n    Scope.prototype.filterElements = function (elements) {\n        var _this = this;\n        return elements.filter(function (element) { return _this.containsElement(element); });\n    };\n    Scope.prototype.containsElement = function (element) {\n        return element.closest(this.controllerSelector) === this.element;\n    };\n    Object.defineProperty(Scope.prototype, \"controllerSelector\", {\n        get: function () {\n            return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Scope;\n}());\nexport { Scope };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NvcGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvY29yZS9zcmMvc2NvcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFlBQVksQ0FBQTtBQUVwQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQ3hDLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGFBQWEsQ0FBQTtBQUV6RDtJQU9FLGVBQVksTUFBYyxFQUFFLFVBQWtCLEVBQUUsT0FBZ0I7UUFDOUQsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDcEIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7UUFDNUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7UUFDdEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNsQyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQy9CLENBQUM7SUFFRCwyQkFBVyxHQUFYLFVBQVksUUFBZ0I7UUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUE7SUFDMUMsQ0FBQztJQUVELCtCQUFlLEdBQWYsVUFBZ0IsUUFBZ0I7UUFDOUIsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUE7UUFDakUsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3JGLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFBO0lBQzFCLENBQUM7SUFFRCw4QkFBYyxHQUFkLFVBQWUsUUFBbUI7UUFBbEMsaUJBRUM7UUFEQyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxVQUFBLE9BQU8sSUFBSSxPQUFBLEtBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLEVBQTdCLENBQTZCLENBQUMsQ0FBQTtJQUNsRSxDQUFDO0lBRUQsK0JBQWUsR0FBZixVQUFnQixPQUFnQjtRQUM5QixNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxJQUFJLENBQUMsT0FBTyxDQUFBO0lBQ2xFLENBQUM7SUFFRCxzQkFBWSxxQ0FBa0I7YUFBOUI7WUFDRSxNQUFNLENBQUMsMkJBQTJCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDdEYsQ0FBQzs7O09BQUE7SUFDSCxZQUFDO0FBQUQsQ0FBQyxBQXBDRCxJQW9DQyJ9","import { ActionSet } from \"./action_set\";\nimport { InlineActionObserver } from \"./inline_action_observer\";\nimport { Scope } from \"./scope\";\nvar Context = /** @class */ (function () {\n    function Context(module, element) {\n        this.module = module;\n        this.scope = new Scope(this.schema, this.identifier, element);\n        this.actions = new ActionSet(this);\n        this.inlineActionObserver = new InlineActionObserver(this, this);\n        try {\n            this.controller = new module.controllerConstructor(this);\n            this.controller.initialize();\n        }\n        catch (error) {\n            this.handleError(error, \"initializing controller\");\n        }\n    }\n    Context.prototype.connect = function () {\n        this.actions.start();\n        this.inlineActionObserver.start();\n        try {\n            this.controller.connect();\n        }\n        catch (error) {\n            this.handleError(error, \"connecting controller\");\n        }\n    };\n    Context.prototype.disconnect = function () {\n        try {\n            this.controller.disconnect();\n        }\n        catch (error) {\n            this.handleError(error, \"disconnecting controller\");\n        }\n        this.inlineActionObserver.stop();\n        this.actions.stop();\n    };\n    Object.defineProperty(Context.prototype, \"application\", {\n        get: function () {\n            return this.module.application;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"identifier\", {\n        get: function () {\n            return this.module.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Context.prototype, \"parentElement\", {\n        get: function () {\n            return this.element.parentElement;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // Inline action observer delegate\n    /** @private */\n    Context.prototype.inlineActionConnected = function (action) {\n        this.actions.add(action);\n    };\n    /** @private */\n    Context.prototype.inlineActionDisconnected = function (action) {\n        this.actions.delete(action);\n    };\n    // Error handling\n    Context.prototype.handleError = function (error, message, detail) {\n        if (detail === void 0) { detail = {}; }\n        var _a = this, identifier = _a.identifier, controller = _a.controller, element = _a.element;\n        detail = Object.assign({ identifier: identifier, controller: controller, element: element }, detail);\n        this.application.handleError(error, \"Error \" + message, detail);\n    };\n    return Context;\n}());\nexport { Context };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9jb3JlL3NyYy9jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxjQUFjLENBQUE7QUFHeEMsT0FBTyxFQUFFLG9CQUFvQixFQUFnQyxNQUFNLDBCQUEwQixDQUFBO0FBRzdGLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUE7QUFFL0I7SUFPRSxpQkFBWSxNQUFjLEVBQUUsT0FBZ0I7UUFDMUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDcEIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFDN0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNsQyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxvQkFBb0IsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFFaEUsSUFBSSxDQUFDO1lBQ0gsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUN4RCxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFBO1FBQzlCLENBQUM7UUFBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUseUJBQXlCLENBQUMsQ0FBQTtRQUNwRCxDQUFDO0lBQ0gsQ0FBQztJQUVELHlCQUFPLEdBQVA7UUFDRSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ3BCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUVqQyxJQUFJLENBQUM7WUFDSCxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFBO1FBQzNCLENBQUM7UUFBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsdUJBQXVCLENBQUMsQ0FBQTtRQUNsRCxDQUFDO0lBQ0gsQ0FBQztJQUVELDRCQUFVLEdBQVY7UUFDRSxJQUFJLENBQUM7WUFDSCxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFBO1FBQzlCLENBQUM7UUFBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLEVBQUUsMEJBQTBCLENBQUMsQ0FBQTtRQUNyRCxDQUFDO1FBRUQsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksRUFBRSxDQUFBO1FBQ2hDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDckIsQ0FBQztJQUVELHNCQUFJLGdDQUFXO2FBQWY7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUE7UUFDaEMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwrQkFBVTthQUFkO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFBO1FBQy9CLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMkJBQU07YUFBVjtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQTtRQUNoQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRCQUFPO2FBQVg7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUE7UUFDM0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxrQ0FBYTthQUFqQjtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQTtRQUNuQyxDQUFDOzs7T0FBQTtJQUVELGtDQUFrQztJQUVsQyxlQUFlO0lBQ2YsdUNBQXFCLEdBQXJCLFVBQXNCLE1BQWM7UUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUE7SUFDMUIsQ0FBQztJQUVELGVBQWU7SUFDZiwwQ0FBd0IsR0FBeEIsVUFBeUIsTUFBYztRQUNyQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUM3QixDQUFDO0lBRUQsaUJBQWlCO0lBRWpCLDZCQUFXLEdBQVgsVUFBWSxLQUFZLEVBQUUsT0FBZSxFQUFFLE1BQW1CO1FBQW5CLHVCQUFBLEVBQUEsV0FBbUI7UUFDdEQsSUFBQSxTQUEwQyxFQUF4QywwQkFBVSxFQUFFLDBCQUFVLEVBQUUsb0JBQU8sQ0FBUztRQUNoRCxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFVBQVUsWUFBQSxFQUFFLFVBQVUsWUFBQSxFQUFFLE9BQU8sU0FBQSxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDbkUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLFdBQVMsT0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFBO0lBQ2pFLENBQUM7SUFDSCxjQUFDO0FBQUQsQ0FBQyxBQWxGRCxJQWtGQyJ9","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexport function blessDefinition(definition) {\n    return {\n        identifier: definition.identifier,\n        controllerConstructor: blessControllerConstructor(definition.controllerConstructor)\n    };\n}\nfunction blessControllerConstructor(controllerConstructor) {\n    var constructor = extend(controllerConstructor);\n    constructor.bless();\n    return constructor;\n}\nvar extend = (function () {\n    function extendWithReflect(constructor) {\n        function Controller() {\n            var _newTarget = this && this instanceof Controller ? this.constructor : void 0;\n            return Reflect.construct(constructor, arguments, _newTarget);\n        }\n        Controller.prototype = Object.create(constructor.prototype, {\n            constructor: { value: Controller }\n        });\n        Reflect.setPrototypeOf(Controller, constructor);\n        return Controller;\n    }\n    function testReflectExtension() {\n        var a = function () { this.a.call(this); };\n        var b = extendWithReflect(a);\n        b.prototype.a = function () { };\n        return new b;\n    }\n    try {\n        testReflectExtension();\n        return extendWithReflect;\n    }\n    catch (error) {\n        return function (constructor) { return /** @class */ (function (_super) {\n            __extends(Controller, _super);\n            function Controller() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            return Controller;\n        }(constructor)); };\n    }\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmaW5pdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9jb3JlL3NyYy9kZWZpbml0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFPQSxNQUFNLDBCQUEwQixVQUFzQjtJQUNwRCxNQUFNLENBQUM7UUFDTCxVQUFVLEVBQUUsVUFBVSxDQUFDLFVBQVU7UUFDakMscUJBQXFCLEVBQUUsMEJBQTBCLENBQUMsVUFBVSxDQUFDLHFCQUFxQixDQUFDO0tBQ3BGLENBQUE7QUFDSCxDQUFDO0FBRUQsb0NBQW9DLHFCQUE0QztJQUM5RSxJQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FBQTtJQUNqRCxXQUFXLENBQUMsS0FBSyxFQUFFLENBQUE7SUFDbkIsTUFBTSxDQUFDLFdBQVcsQ0FBQTtBQUNwQixDQUFDO0FBRUQsSUFBTSxNQUFNLEdBQUcsQ0FBQztJQUNkLDJCQUEyQixXQUFXO1FBQ3BDOztZQUNFLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFdBQVcsRUFBRSxTQUFTLGFBQWEsQ0FBQTtRQUM5RCxDQUFDO1FBRUQsVUFBVSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxTQUFTLEVBQUU7WUFDMUQsV0FBVyxFQUFFLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRTtTQUNuQyxDQUFDLENBQUE7UUFFRixPQUFPLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxXQUFXLENBQUMsQ0FBQTtRQUMvQyxNQUFNLENBQUMsVUFBaUIsQ0FBQTtJQUMxQixDQUFDO0lBRUQ7UUFDRSxJQUFNLENBQUMsR0FBRyxjQUFhLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBLENBQUMsQ0FBQyxDQUFBO1FBQzFDLElBQU0sQ0FBQyxHQUFHLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQzlCLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLGNBQVksQ0FBQyxDQUFBO1FBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNkLENBQUM7SUFFRCxJQUFJLENBQUM7UUFDSCxvQkFBb0IsRUFBRSxDQUFBO1FBQ3RCLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQTtJQUMxQixDQUFDO0lBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNmLE1BQU0sQ0FBQyxVQUFDLFdBQVcsSUFBSztZQUF5Qiw4QkFBVztZQUFwQzs7WUFBc0MsQ0FBQztZQUFELGlCQUFDO1FBQUQsQ0FBQyxBQUF2QyxDQUF5QixXQUFXLElBQXBDLENBQXVDLENBQUE7SUFDakUsQ0FBQztBQUNILENBQUMsQ0FBQyxFQUFFLENBQUEifQ==","import { Context } from \"./context\";\nimport { blessDefinition } from \"./definition\";\nvar Module = /** @class */ (function () {\n    function Module(application, definition) {\n        this.application = application;\n        this.definition = blessDefinition(definition);\n        this.contextsByElement = new WeakMap;\n        this.connectedContexts = new Set;\n    }\n    Object.defineProperty(Module.prototype, \"identifier\", {\n        get: function () {\n            return this.definition.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"controllerConstructor\", {\n        get: function () {\n            return this.definition.controllerConstructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"contexts\", {\n        get: function () {\n            return Array.from(this.connectedContexts);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Module.prototype, \"size\", {\n        get: function () {\n            return this.connectedContexts.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Module.prototype.connectElement = function (element) {\n        var context = this.fetchContextForElement(element);\n        if (context && !this.connectedContexts.has(context)) {\n            this.connectedContexts.add(context);\n            context.connect();\n        }\n    };\n    Module.prototype.disconnectElement = function (element) {\n        var context = this.fetchContextForElement(element);\n        if (context && this.connectedContexts.has(context)) {\n            this.connectedContexts.delete(context);\n            context.disconnect();\n        }\n    };\n    Module.prototype.getContextForElement = function (element) {\n        return this.contextsByElement.get(element);\n    };\n    Module.prototype.fetchContextForElement = function (element) {\n        var context = this.contextsByElement.get(element);\n        if (!context) {\n            context = new Context(this, element);\n            this.contextsByElement.set(element, context);\n        }\n        return context;\n    };\n    return Module;\n}());\nexport { Module };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvQHN0aW11bHVzL2NvcmUvc3JjL21vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sV0FBVyxDQUFBO0FBRW5DLE9BQU8sRUFBYyxlQUFlLEVBQUUsTUFBTSxjQUFjLENBQUE7QUFFMUQ7SUFPRSxnQkFBWSxXQUF3QixFQUFFLFVBQXNCO1FBQzFELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxVQUFVLEdBQUcsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLE9BQU8sQ0FBQTtRQUNwQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxHQUFHLENBQUE7SUFDbEMsQ0FBQztJQUVELHNCQUFJLDhCQUFVO2FBQWQ7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUE7UUFDbkMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSx5Q0FBcUI7YUFBekI7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxxQkFBcUIsQ0FBQTtRQUM5QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDRCQUFRO2FBQVo7WUFDRSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtRQUMzQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHdCQUFJO2FBQVI7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQTtRQUNwQyxDQUFDOzs7T0FBQTtJQUVELCtCQUFjLEdBQWQsVUFBZSxPQUFnQjtRQUM3QixJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDcEQsRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDcEQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtZQUNuQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDbkIsQ0FBQztJQUNILENBQUM7SUFFRCxrQ0FBaUIsR0FBakIsVUFBa0IsT0FBZ0I7UUFDaEMsSUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQ3BELEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNuRCxJQUFJLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1lBQ3RDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsQ0FBQTtRQUN0QixDQUFDO0lBQ0gsQ0FBQztJQUVELHFDQUFvQixHQUFwQixVQUFxQixPQUFnQjtRQUNuQyxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTtJQUM1QyxDQUFDO0lBRU8sdUNBQXNCLEdBQTlCLFVBQStCLE9BQWdCO1FBQzdDLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDakQsRUFBRSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ2IsT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQTtZQUNwQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUM5QyxDQUFDO1FBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQTtJQUNoQixDQUFDO0lBQ0gsYUFBQztBQUFELENBQUMsQUExREQsSUEwREMifQ==","import { Module } from \"./module\";\nimport { TokenListObserver } from \"@stimulus/mutation-observers\";\nvar Router = /** @class */ (function () {\n    function Router(application) {\n        this.application = application;\n        this.tokenListObserver = new TokenListObserver(this.element, this.controllerAttribute, this);\n        this.modulesByIdentifier = new Map;\n    }\n    Object.defineProperty(Router.prototype, \"schema\", {\n        get: function () {\n            return this.application.schema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"element\", {\n        get: function () {\n            return this.application.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"controllerAttribute\", {\n        get: function () {\n            return this.schema.controllerAttribute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Router.prototype, \"modules\", {\n        get: function () {\n            return Array.from(this.modulesByIdentifier.values());\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Router.prototype.start = function () {\n        this.tokenListObserver.start();\n    };\n    Router.prototype.stop = function () {\n        this.tokenListObserver.stop();\n    };\n    Router.prototype.loadDefinition = function (definition) {\n        var identifier = definition.identifier;\n        this.unloadIdentifier(identifier);\n        var module = new Module(this.application, definition);\n        this.modulesByIdentifier.set(identifier, module);\n        this.connectModule(module);\n    };\n    Router.prototype.unloadIdentifier = function (identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            this.disconnectModule(module);\n            this.modulesByIdentifier.delete(identifier);\n        }\n    };\n    // Token list observer delegate\n    /** @private */\n    Router.prototype.elementMatchedTokenForAttribute = function (element, token, attributeName) {\n        this.connectModuleForIdentifierToElement(token, element);\n    };\n    /** @private */\n    Router.prototype.elementUnmatchedTokenForAttribute = function (element, token, attributeName) {\n        this.disconnectModuleForIdentifierFromElement(token, element);\n    };\n    Object.defineProperty(Router.prototype, \"contexts\", {\n        // Contexts\n        get: function () {\n            return this.modules.reduce(function (contexts, module) { return contexts.concat(Array.from(module.contexts)); }, []);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Router.prototype.getContextForElementAndIdentifier = function (element, identifier) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            return module.getContextForElement(element);\n        }\n    };\n    Router.prototype.connectModule = function (module) {\n        var elements = this.tokenListObserver.getElementsMatchingToken(module.identifier);\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var element = elements_1[_i];\n            module.connectElement(element);\n        }\n    };\n    Router.prototype.disconnectModule = function (module) {\n        var contexts = module.contexts;\n        for (var _i = 0, contexts_1 = contexts; _i < contexts_1.length; _i++) {\n            var element = contexts_1[_i].element;\n            module.disconnectElement(element);\n        }\n    };\n    Router.prototype.connectModuleForIdentifierToElement = function (identifier, element) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            module.connectElement(element);\n        }\n    };\n    Router.prototype.disconnectModuleForIdentifierFromElement = function (identifier, element) {\n        var module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            module.disconnectElement(element);\n        }\n    };\n    return Router;\n}());\nexport { Router };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91dGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvQHN0aW11bHVzL2NvcmUvc3JjL3JvdXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBRWpDLE9BQU8sRUFBRSxpQkFBaUIsRUFBNkIsTUFBTSw4QkFBOEIsQ0FBQTtBQUUzRjtJQUtFLGdCQUFZLFdBQXdCO1FBQ2xDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFBO1FBQzlCLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLGlCQUFpQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFBO1FBQzVGLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLEdBQUcsQ0FBQTtJQUNwQyxDQUFDO0lBRUQsc0JBQUksMEJBQU07YUFBVjtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQTtRQUNoQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDJCQUFPO2FBQVg7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUE7UUFDakMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSx1Q0FBbUI7YUFBdkI7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQTtRQUN4QyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDJCQUFPO2FBQVg7WUFDRSxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQTtRQUN0RCxDQUFDOzs7T0FBQTtJQUVELHNCQUFLLEdBQUw7UUFDRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxFQUFFLENBQUE7SUFDaEMsQ0FBQztJQUVELHFCQUFJLEdBQUo7UUFDRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUE7SUFDL0IsQ0FBQztJQUVELCtCQUFjLEdBQWQsVUFBZSxVQUFzQjtRQUMzQixJQUFBLGtDQUFVLENBQWU7UUFDakMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBRWpDLElBQU0sTUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUE7UUFDdkQsSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDaEQsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUM1QixDQUFDO0lBRUQsaUNBQWdCLEdBQWhCLFVBQWlCLFVBQWtCO1FBQ2pDLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDdkQsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNYLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQTtZQUM3QixJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQzdDLENBQUM7SUFDSCxDQUFDO0lBRUQsK0JBQStCO0lBRS9CLGVBQWU7SUFDZixnREFBK0IsR0FBL0IsVUFBZ0MsT0FBZ0IsRUFBRSxLQUFhLEVBQUUsYUFBcUI7UUFDcEYsSUFBSSxDQUFDLG1DQUFtQyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQTtJQUMxRCxDQUFDO0lBRUQsZUFBZTtJQUNmLGtEQUFpQyxHQUFqQyxVQUFrQyxPQUFnQixFQUFFLEtBQWEsRUFBRSxhQUFxQjtRQUN0RixJQUFJLENBQUMsd0NBQXdDLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFBO0lBQy9ELENBQUM7SUFJRCxzQkFBSSw0QkFBUTtRQUZaLFdBQVc7YUFFWDtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFDLFFBQVEsRUFBRSxNQUFNLElBQUssT0FBQSxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQTVDLENBQTRDLEVBQUUsRUFBRSxDQUFDLENBQUE7UUFDcEcsQ0FBQzs7O09BQUE7SUFFRCxrREFBaUMsR0FBakMsVUFBa0MsT0FBZ0IsRUFBRSxVQUFrQjtRQUNwRSxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3ZELEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDWCxNQUFNLENBQUMsTUFBTSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFBO1FBQzdDLENBQUM7SUFDSCxDQUFDO0lBRU8sOEJBQWEsR0FBckIsVUFBc0IsTUFBYztRQUNsQyxJQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsd0JBQXdCLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ25GLEdBQUcsQ0FBQyxDQUFrQixVQUFRLEVBQVIscUJBQVEsRUFBUixzQkFBUSxFQUFSLElBQVE7WUFBekIsSUFBTSxPQUFPLGlCQUFBO1lBQ2hCLE1BQU0sQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUE7U0FDL0I7SUFDSCxDQUFDO0lBRU8saUNBQWdCLEdBQXhCLFVBQXlCLE1BQWM7UUFDckMsSUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQTtRQUNoQyxHQUFHLENBQUMsQ0FBc0IsVUFBUSxFQUFSLHFCQUFRLEVBQVIsc0JBQVEsRUFBUixJQUFRO1lBQXJCLElBQUEsZ0NBQU87WUFDbEIsTUFBTSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFBO1NBQ2xDO0lBQ0gsQ0FBQztJQUVPLG9EQUFtQyxHQUEzQyxVQUE0QyxVQUFrQixFQUFFLE9BQWdCO1FBQzlFLElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUE7UUFDdkQsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNYLE1BQU0sQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDaEMsQ0FBQztJQUNILENBQUM7SUFFTyx5REFBd0MsR0FBaEQsVUFBaUQsVUFBa0IsRUFBRSxPQUFnQjtRQUNuRixJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3ZELEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDWCxNQUFNLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUE7UUFDbkMsQ0FBQztJQUNILENBQUM7SUFDSCxhQUFDO0FBQUQsQ0FBQyxBQXhHRCxJQXdHQyJ9","export var defaultSchema = {\n    controllerAttribute: \"data-controller\",\n    actionAttribute: \"data-action\",\n    targetAttribute: \"data-target\"\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvQHN0aW11bHVzL2NvcmUvc3JjL3NjaGVtYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxNQUFNLENBQUMsSUFBTSxhQUFhLEdBQVc7SUFDbkMsbUJBQW1CLEVBQUUsaUJBQWlCO0lBQ3RDLGVBQWUsRUFBRSxhQUFhO0lBQzlCLGVBQWUsRUFBRSxhQUFhO0NBQy9CLENBQUEifQ==","import { Router } from \"./router\";\nimport { defaultSchema } from \"./schema\";\nvar Application = /** @class */ (function () {\n    function Application(element, schema) {\n        if (element === void 0) { element = document.documentElement; }\n        if (schema === void 0) { schema = defaultSchema; }\n        this.element = element;\n        this.schema = schema;\n        this.router = new Router(this);\n    }\n    Application.start = function (element, schema) {\n        var application = new Application(element, schema);\n        application.start();\n        return application;\n    };\n    Application.prototype.start = function () {\n        this.router.start();\n    };\n    Application.prototype.stop = function () {\n        this.router.stop();\n    };\n    Application.prototype.register = function (identifier, controllerConstructor) {\n        this.load({ identifier: identifier, controllerConstructor: controllerConstructor });\n    };\n    Application.prototype.load = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var definitions = Array.isArray(head) ? head : [head].concat(rest);\n        definitions.forEach(function (definition) { return _this.router.loadDefinition(definition); });\n    };\n    Application.prototype.unload = function (head) {\n        var _this = this;\n        var rest = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            rest[_i - 1] = arguments[_i];\n        }\n        var identifiers = Array.isArray(head) ? head : [head].concat(rest);\n        identifiers.forEach(function (identifier) { return _this.router.unloadIdentifier(identifier); });\n    };\n    Object.defineProperty(Application.prototype, \"controllers\", {\n        // Controllers\n        get: function () {\n            return this.router.contexts.map(function (context) { return context.controller; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Application.prototype.getControllerForElementAndIdentifier = function (element, identifier) {\n        var context = this.router.getContextForElementAndIdentifier(element, identifier);\n        return context ? context.controller : null;\n    };\n    // Error handling\n    Application.prototype.handleError = function (error, message, detail) {\n        console.error(\"%s\\n\\n%o\\n\\n%o\", message, error, detail);\n    };\n    return Application;\n}());\nexport { Application };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwbGljYXRpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvY29yZS9zcmMvYXBwbGljYXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUNqQyxPQUFPLEVBQVUsYUFBYSxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBRWhEO0lBV0UscUJBQVksT0FBMkMsRUFBRSxNQUE4QjtRQUEzRSx3QkFBQSxFQUFBLFVBQW1CLFFBQVEsQ0FBQyxlQUFlO1FBQUUsdUJBQUEsRUFBQSxzQkFBOEI7UUFDckYsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7UUFDdEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7UUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNoQyxDQUFDO0lBVk0saUJBQUssR0FBWixVQUFhLE9BQWlCLEVBQUUsTUFBZTtRQUM3QyxJQUFNLFdBQVcsR0FBRyxJQUFJLFdBQVcsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUE7UUFDcEQsV0FBVyxDQUFDLEtBQUssRUFBRSxDQUFBO1FBQ25CLE1BQU0sQ0FBQyxXQUFXLENBQUE7SUFDcEIsQ0FBQztJQVFELDJCQUFLLEdBQUw7UUFDRSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFBO0lBQ3JCLENBQUM7SUFFRCwwQkFBSSxHQUFKO1FBQ0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQTtJQUNwQixDQUFDO0lBRUQsOEJBQVEsR0FBUixVQUFTLFVBQWtCLEVBQUUscUJBQTRDO1FBQ3ZFLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxVQUFVLFlBQUEsRUFBRSxxQkFBcUIsdUJBQUEsRUFBRSxDQUFDLENBQUE7SUFDbEQsQ0FBQztJQUlELDBCQUFJLEdBQUosVUFBSyxJQUErQjtRQUFwQyxpQkFHQztRQUhxQyxjQUFxQjthQUFyQixVQUFxQixFQUFyQixxQkFBcUIsRUFBckIsSUFBcUI7WUFBckIsNkJBQXFCOztRQUN6RCxJQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLElBQUksU0FBSyxJQUFJLENBQUMsQ0FBQTtRQUNoRSxXQUFXLENBQUMsT0FBTyxDQUFDLFVBQUEsVUFBVSxJQUFJLE9BQUEsS0FBSSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLEVBQXRDLENBQXNDLENBQUMsQ0FBQTtJQUMzRSxDQUFDO0lBSUQsNEJBQU0sR0FBTixVQUFPLElBQXVCO1FBQTlCLGlCQUdDO1FBSCtCLGNBQWlCO2FBQWpCLFVBQWlCLEVBQWpCLHFCQUFpQixFQUFqQixJQUFpQjtZQUFqQiw2QkFBaUI7O1FBQy9DLElBQU0sV0FBVyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxTQUFLLElBQUksQ0FBQyxDQUFBO1FBQ2hFLFdBQVcsQ0FBQyxPQUFPLENBQUMsVUFBQSxVQUFVLElBQUksT0FBQSxLQUFJLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxFQUF4QyxDQUF3QyxDQUFDLENBQUE7SUFDN0UsQ0FBQztJQUlELHNCQUFJLG9DQUFXO1FBRmYsY0FBYzthQUVkO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxVQUFBLE9BQU8sSUFBSSxPQUFBLE9BQU8sQ0FBQyxVQUFVLEVBQWxCLENBQWtCLENBQUMsQ0FBQTtRQUNoRSxDQUFDOzs7T0FBQTtJQUVELDBEQUFvQyxHQUFwQyxVQUFxQyxPQUFnQixFQUFFLFVBQWtCO1FBQ3ZFLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsaUNBQWlDLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFBO1FBQ2xGLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQTtJQUM1QyxDQUFDO0lBRUQsaUJBQWlCO0lBRWpCLGlDQUFXLEdBQVgsVUFBWSxLQUFZLEVBQUUsT0FBZSxFQUFFLE1BQWM7UUFDdkQsT0FBTyxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFBO0lBQ3pELENBQUM7SUFDSCxrQkFBQztBQUFELENBQUMsQUEzREQsSUEyREMifQ==","export function defineTargetProperties(constructor) {\n    var prototype = constructor.prototype;\n    var targetNames = getTargetNamesForConstructor(constructor);\n    targetNames.forEach(function (name) {\n        return defineLinkedProperties(prototype, (_a = {},\n            _a[name + \"Target\"] = {\n                get: function () {\n                    var target = this.targets.find(name);\n                    if (target) {\n                        return target;\n                    }\n                    else {\n                        throw new Error(\"Missing target element \\\"\" + this.identifier + \".\" + name + \"\\\"\");\n                    }\n                }\n            },\n            _a[name + \"Targets\"] = {\n                get: function () {\n                    return this.targets.findAll(name);\n                }\n            },\n            _a[\"has\" + capitalize(name) + \"Target\"] = {\n                get: function () {\n                    return this.targets.has(name);\n                }\n            },\n            _a));\n        var _a;\n    });\n}\nfunction getTargetNamesForConstructor(constructor) {\n    var ancestors = getAncestorsForConstructor(constructor);\n    return Array.from(ancestors.reduce(function (targetNames, constructor) {\n        getOwnTargetNamesForConstructor(constructor).forEach(function (name) { return targetNames.add(name); });\n        return targetNames;\n    }, new Set));\n}\nfunction getAncestorsForConstructor(constructor) {\n    var ancestors = [];\n    while (constructor) {\n        ancestors.push(constructor);\n        constructor = Object.getPrototypeOf(constructor);\n    }\n    return ancestors;\n}\nfunction getOwnTargetNamesForConstructor(constructor) {\n    var definition = constructor[\"targets\"];\n    return Array.isArray(definition) ? definition : [];\n}\nfunction defineLinkedProperties(object, properties) {\n    Object.keys(properties).forEach(function (name) {\n        if (!(name in object)) {\n            var descriptor = properties[name];\n            Object.defineProperty(object, name, descriptor);\n        }\n    });\n}\nfunction capitalize(name) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFyZ2V0X3Byb3BlcnRpZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvY29yZS9zcmMvdGFyZ2V0X3Byb3BlcnRpZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxpQ0FBaUMsV0FBcUI7SUFDMUQsSUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQTtJQUN2QyxJQUFNLFdBQVcsR0FBRyw0QkFBNEIsQ0FBQyxXQUFXLENBQUMsQ0FBQTtJQUM3RCxXQUFXLENBQUMsT0FBTyxDQUFDLFVBQUEsSUFBSTtRQUFJLE9BQUEsc0JBQXNCLENBQUMsU0FBUztZQUMxRCxHQUFJLElBQUksV0FBUSxJQUFHO2dCQUNqQixHQUFHO29CQUNELElBQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO29CQUN0QyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO3dCQUNYLE1BQU0sQ0FBQyxNQUFNLENBQUE7b0JBQ2YsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDTixNQUFNLElBQUksS0FBSyxDQUFDLDhCQUEyQixJQUFJLENBQUMsVUFBVSxTQUFJLElBQUksT0FBRyxDQUFDLENBQUE7b0JBQ3hFLENBQUM7Z0JBQ0gsQ0FBQzthQUNGO1lBQ0QsR0FBSSxJQUFJLFlBQVMsSUFBRztnQkFDbEIsR0FBRztvQkFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQ25DLENBQUM7YUFDRjtZQUNELEdBQUMsUUFBTSxVQUFVLENBQUMsSUFBSSxDQUFDLFdBQVEsSUFBRztnQkFDaEMsR0FBRztvQkFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7Z0JBQy9CLENBQUM7YUFDRjtnQkFDRDs7SUFyQjBCLENBcUIxQixDQUFDLENBQUE7QUFDTCxDQUFDO0FBRUQsc0NBQXNDLFdBQXFCO0lBQ3pELElBQU0sU0FBUyxHQUFHLDBCQUEwQixDQUFDLFdBQVcsQ0FBQyxDQUFBO0lBQ3pELE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsVUFBQyxXQUFXLEVBQUUsV0FBVztRQUMxRCwrQkFBK0IsQ0FBQyxXQUFXLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxXQUFXLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFyQixDQUFxQixDQUFDLENBQUE7UUFDbkYsTUFBTSxDQUFDLFdBQVcsQ0FBQTtJQUNwQixDQUFDLEVBQUUsSUFBSSxHQUFrQixDQUFDLENBQUMsQ0FBQTtBQUM3QixDQUFDO0FBRUQsb0NBQW9DLFdBQXFCO0lBQ3ZELElBQU0sU0FBUyxHQUFlLEVBQUUsQ0FBQTtJQUNoQyxPQUFPLFdBQVcsRUFBRSxDQUFDO1FBQ25CLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDM0IsV0FBVyxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLENBQUE7SUFDbEQsQ0FBQztJQUNELE1BQU0sQ0FBQyxTQUFTLENBQUE7QUFDbEIsQ0FBQztBQUVELHlDQUF5QyxXQUFxQjtJQUM1RCxJQUFNLFVBQVUsR0FBRyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUE7SUFDekMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFBO0FBQ3BELENBQUM7QUFFRCxnQ0FBZ0MsTUFBVyxFQUFFLFVBQWlDO0lBQzVFLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUMsSUFBSTtRQUNuQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0QixJQUFNLFVBQVUsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDbkMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxFQUFFLFVBQVUsQ0FBQyxDQUFBO1FBQ2pELENBQUM7SUFDSCxDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUM7QUFFRCxvQkFBb0IsSUFBWTtJQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFBO0FBQ3JELENBQUMifQ==","import { defineTargetProperties } from \"./target_properties\";\nvar Controller = /** @class */ (function () {\n    function Controller(context) {\n        this.context = context;\n    }\n    Controller.bless = function () {\n        defineTargetProperties(this);\n    };\n    Object.defineProperty(Controller.prototype, \"application\", {\n        get: function () {\n            return this.context.application;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"scope\", {\n        get: function () {\n            return this.context.scope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"element\", {\n        get: function () {\n            return this.scope.element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"identifier\", {\n        get: function () {\n            return this.scope.identifier;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"targets\", {\n        get: function () {\n            return this.scope.targets;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Controller.prototype, \"data\", {\n        get: function () {\n            return this.scope.data;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Controller.prototype.initialize = function () {\n        // Override in your subclass to set up initial controller state\n    };\n    Controller.prototype.connect = function () {\n        // Override in your subclass to respond when the controller is connected to the DOM\n    };\n    Controller.prototype.disconnect = function () {\n        // Override in your subclass to respond when the controller is disconnected from the DOM\n    };\n    Controller.targets = [];\n    return Controller;\n}());\nexport { Controller };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BzdGltdWx1cy9jb3JlL3NyYy9jb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUtBLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHFCQUFxQixDQUFBO0FBTzVEO0lBU0Usb0JBQVksT0FBZ0I7UUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7SUFDeEIsQ0FBQztJQU5NLGdCQUFLLEdBQVo7UUFDRSxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUM5QixDQUFDO0lBTUQsc0JBQUksbUNBQVc7YUFBZjtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQTtRQUNqQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDZCQUFLO2FBQVQ7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUE7UUFDM0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwrQkFBTzthQUFYO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFBO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksa0NBQVU7YUFBZDtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQTtRQUM5QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLCtCQUFPO2FBQVg7WUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUE7UUFDM0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw0QkFBSTthQUFSO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFBO1FBQ3hCLENBQUM7OztPQUFBO0lBRUQsK0JBQVUsR0FBVjtRQUNFLCtEQUErRDtJQUNqRSxDQUFDO0lBRUQsNEJBQU8sR0FBUDtRQUNFLG1GQUFtRjtJQUNyRixDQUFDO0lBRUQsK0JBQVUsR0FBVjtRQUNFLHdGQUF3RjtJQUMxRixDQUFDO0lBOUNNLGtCQUFPLEdBQWEsRUFBRSxDQUFBO0lBK0MvQixpQkFBQztDQUFBLEFBaERELElBZ0RDO1NBaERZLFVBQVUifQ==","export { Action } from \"./src/action\";\nexport { ActionDescriptor } from \"./src/action_descriptor\";\nexport { Application } from \"./src/application\";\nexport { Context } from \"./src/context\";\nexport { Controller } from \"./src/controller\";\nexport { defaultSchema } from \"./src/schema\";\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wYWNrYWdlcy9Ac3RpbXVsdXMvY29yZS9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sY0FBYyxDQUFBO0FBQ3JDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHlCQUF5QixDQUFBO0FBQzFELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQTtBQUMvQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sZUFBZSxDQUFBO0FBQ3ZDLE9BQU8sRUFBRSxVQUFVLEVBQXlCLE1BQU0sa0JBQWtCLENBQUE7QUFFcEUsT0FBTyxFQUFVLGFBQWEsRUFBRSxNQUFNLGNBQWMsQ0FBQSJ9","export * from \"@stimulus/core\"\n","import { Controller } from \"stimulus\"\n\nexport default class extends Controller {\n\n}\n","import { Controller } from \"stimulus\"\n\nexport default class extends Controller {\n    static targets = [ \"content\", \"headline\" ]\n    refresh () {\n        this.headlineTarget.innerHTML = \"Hello\"\n        this.contentTarget.innerHTML = \"Refresh!\"\n    }\n}","import { Application } from \"stimulus\"\nimport './../styles/index.scss'\n\n// import controllers\nimport HelloController from \"./controllers/hello_controller\"\nimport RefreshableController from \"./controllers/refreshable_controller\"\n\nconst application = Application.start()\n\n// register controllers\napplication.register(\"hello\", HelloController)\napplication.register(\"refreshable\", RefreshableController)","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}